<!DOCTYPE html>
<html lang="en" >
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="為了可能的聲音"> 
    <meta name="author" content="Rex Tsou">
    <meta name="copyright" content="Rex Tsou">
    
    <meta property="og:title" content="Command Line 資料重導向相關命令">
    <meta property="og:type" content="article">
    <meta property="og:description" content="為了可能的聲音">
    
    <meta itemprop="name" content="Command Line 資料重導向相關命令 | 為了可能的聲音">
    <meta itemprop="description" content="為了可能的聲音">
    <title>Command Line 資料重導向相關命令 | 為了可能的聲音</title>
    <link rel="stylesheet" href="https://blog.rex-tsou.com/css/style.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"> 
  </head>

<header class="section header">
  <div class="container">
    <nav class="nav">
      <div class="nav__left">
        <a class="nav__item" href="https://blog.rex-tsou.com"><h1 class="title">為了可能的聲音</h1></a>
      </div>
      <div class="nav__right">
        <nav class="nav__item">
          <a class="item__link" href="/post">Archives</a>
        </nav>
        <nav class="nav__item">
          
          <a class="item__link" href="https://github.com/akccakcctw" target="_blank" rel="noopener">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="item__link" href="https://www.facebook.com/akccakcctw" target="_blank" rel="noopener">
            <span class="icon">
              <i class="fa fa-facebook-square"></i>
            </span>
          </a>
          
          <a class="item__link" href="/index.xml" target="_blank" rel="noopener">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</header>

<section class="section">
  <div class="container">
    <time class="date date--publish">July 27, 2016</time>
    
      <div class="category">
  
  <span class="category__item">
    <a href="/categories/bash">bash</a>
  </span>
  
  <span class="category__item">
    <a href="/categories/command-line">command-line</a>
  </span>
  
</div>

    
    <h1 class="title">Command Line 資料重導向相關命令</h1>
    <div class="content">
      <h2 id="stdinstdoutstderr"><code>stdin</code>、<code>stdout</code>、<code>stderr</code></h2>
<ul>
<li><code>0：stdin</code>（Standard input）標準輸入</li>
<li><code>1：stdout</code>（Standard output）標準輸出</li>
<li><code>2：stderr</code>（Standard error）標準錯誤輸出</li>
</ul>
<h2 id="heading"><code>&gt;</code></h2>
<p><strong>redirect output to a file（將<code>stdout</code>導向檔案，會覆寫原有檔案）</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 將現在路徑輸出至 path.txt</span>
pwd &gt; path.txt
</code></pre></div><h2 id="heading-1"><code>&gt;&gt;</code></h2>
<p><strong>redirect output to an existing file（將<code>stdout</code>導向檔案末尾，原檔案內容保留）</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 將現在路徑內的檔案列表輸出至 path.txt 末，但保留 path.txt 原有的資料</span>
ls &gt;&gt; path.txt
</code></pre></div><h2 id="heading-2"><code>&lt;</code></h2>
<p><strong>read input from a file （將檔案當作<code>stdin</code>）</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 列出 text.txt 內含有字元 t 的行</span>
grep t &lt; text.txt

<span style="color:#75715e"># 輸出至 output.txt</span>
grep t &lt; text.txt &gt; output.txt
</code></pre></div><h2 id="heading-3"><code>|</code></h2>
<p><strong>pass output to another command（將<code>stdout</code>當作另一指令的<code>stdin</code>）</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 列出現在資料夾內含有&#39;a&#39;字元的檔案</span>
ls | grep a

<span style="color:#75715e"># 將`ls -l`的輸出用`less`分頁</span>
ls -l | less
</code></pre></div><h2 id="tee"><code>tee</code></h2>
<p><strong>both redirect output to a file and pass it to another command（<code>&gt;</code>和<code>|</code>的綜合，將<code>stdout</code>導向檔案之後，後面繼續接<code>|</code>，再將<code>stdout</code>當作另一指令的<code>stdin</code>），目的是為了導向到多個輸出。</strong></p>
<p>可以想像成大寫的 T，就很好理解它的管道概念了。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ls | tee list.txt | grep a

<span style="color:#75715e"># -a：追加而不覆蓋目標文件</span>
ls | tee -a list.txt | grep a
</code></pre></div><h2 id="stderr"><code>stderr</code>的重導</h2>
<p><strong><code>stderr</code>預設會輸出至終端，如果想要輸出至檔案，也可以用<code>|&amp;</code>代替<code>|</code>，則<code>stderr</code>會與<code>stdout</code>一起輸出至管道後方指定的程式或檔案。</strong></p>
<h2 id="heading-4">標準檔案控制代碼的重導</h2>
<p>可將檔案描述符（數字）放在重導向符號前，影響重導向的資料流</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># `stderr`會輸出至stderr.txt，`stdin`則一樣輸出到終端</span>
cat input.txt 2&gt; stderr.txt

<span style="color:#75715e"># `stderr`會與`stdin`融合輸出至result.txt</span>
find / -name .profile &gt; result.txt 2&gt;&amp;<span style="color:#ae81ff">1</span>
</code></pre></div><h2 id="heading-5">參考資料</h2>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E6%A8%99%E6%BA%96%E4%B8%B2%E6%B5%81">維基百科：標準串流</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%AE%A1%E9%81%93_(Unix)">維基百科：管道（Unix）</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E9%87%8D%E5%AE%9A%E5%90%91_(%E8%AE%A1%E7%AE%97%E6%9C%BA)">維基百科：重新導向（電腦）</a></li>
</ul>

    </div>
    <blockquote class="page-info">
      最後更新時間：<time class="date date--update">July 27, 2016</time>
    </blockquote>
  </div>
</section>

<section class="section disqus">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
    <script type="text/javascript">
      var disqus_shortname = 'akccakcctw';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>



<footer class="section footer">
  <div class="container">
    <p>© 2018 <a href="https://github.com/akccakcctw" target="_blank">Rex Tsou</a></p>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/vim.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scss.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-57924156-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



